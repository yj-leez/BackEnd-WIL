# Ch8 경계

### 외부 코드 사용하기

`java.util.Map`

- Generics를 사용하여 코드 가독성을 높일 수 있다.
- 하지만 인터페이스가 언제든 변할 수 있기 때문에 Generics에 의존하는 것도 위험하다.
- Map(인터페이스)를 사용할 클래스 안에서 관리하고 변환하면 설계 규칙과 비즈니스 규칙을 강제할 수 있다.

```java
Map sensorrs = new HashMap();
Sensor s = (Sensor)sensors.get(sensorId);
```

- *문제점)* Map이 반환하는 Object를 올바른 유형으로 변환할 책임은 클라이언트에 있으며 위와 같은 코드가 여러 차례 나와 깔끔하지 않은 코드가 된다.

```java
public class Sensors {
  private Map sensors = new HashMap();
  
  public Sensor getById(String id) {
    return (Sensor) sensors.get(id);
  }
  ...
}
```

- *수정방향)* 경계 인터페이스인 Map을 Sensors 안으로 숨긴다.
    
    → Map 인터페이스가 변하더라도 나머지 프로그램에는 영향을 미치지 않는다. Sensors 클래스 안에서 객체 유형을 관리하고 변환하기 때문이다.
    

### 경계 살피고 익히기

- 외부 코드를 익히기는 어렵다. 외부 코드를 통합하기도 어렵다. 대신 먼저 간단한 테스트 케이스를 작성해 외부 코드를 익힐 수 있다. 짐 뉴커크는 이를 **학습 테스트**라 부른다.
- 학습 테스트는 이해도를 높여주는 정확한 실험임에 동시에 패키지 새 버전이 나온다면 차이가 있는지 바로 확인도 할 수 있다.

### 아직 존재하지 않는 코드를 사용하기

- 필요한 외부 기능과 인터페이스를 자체적으로 정의하라.
- 기존 코드와 외부 인터페이스 경계를 분리하라.
- 기존 코드, 외부 인터페이스, 경계 테스트 케이스를 각각 작성하고 테스트하라.